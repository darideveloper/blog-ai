---
// Import layouts
import PageLayout from '../../layouts/PageLayout.astro'

// Import components
import Hero from '../../components/Hero.jsx'
import CardsGrid from '../../components/CardsGrid.astro'

// Get categories from posts
import { getCollection } from 'astro:content'
const posts = (await getCollection('blog')).sort(
  (a, b) => a.data.pubDate.valueOf() - b.data.pubDate.valueOf()
)

let authors:Record<string, number> = {}
posts.forEach((post) => {
  const post_author = post.data.author
  if (post_author) {
    if (authors[post_author]) {
      authors[post_author] += 1
    } else {
      authors[post_author] = 1
    }
  }
})
---

<PageLayout
  page_title="Autores"
  page_description="Autores de los artÃ­culos publicados en el blog."
>
  <Hero
		title="Autores"
		image="/imgs/hero.png"
	/>
  <CardsGrid
    cards_elems={authors}
    base_img_folder="authors"
    base_link="autores"
  />
</PageLayout>

<style lang="sass">
</style>
